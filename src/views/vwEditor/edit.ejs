<script src="https://cdn.tiny.cloud/1/<%= api_key %>/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
<script>
    document.addEventListener('focusin', function (e) { 
  if (e.target.closest('.tox-tinymce-aux, .moxman-window, .tam-assetmanager-root') !== null) { 
    e.stopImmediatePropagation();
  } 
});
	tinymce.init({
		selector: "textarea#txtContent",
		plugins: "paste image link autolink lists table media",
		menubar: false,
		toolbar: ["undo redo | bold italic underline strikethrough | numlist bullist | alignleft aligncenter alignright | forecolor backcolor | table link image media"],
		images_upload_url: "/api/images/upload",
		images_upload_handler: img_upload_handler,
    setup: function (editor) {
      editor.on('init', function () {
        // Safely set content inside TinyMCE
        const content = document.getElementById('hiddenContent').value || '';
        editor.setContent(content);
      });
    }
	});
</script>
<div class="container">
    <!-- Article Header -->
    <div class="my-4">
        <p class="text-muted"><%= article.category_name %></p> <!-- Dynamic category -->
        <h1 class="fw-bold"><%= article.title %></h1> <!-- Dynamic article title -->
        <p class="text-muted"><%= article?.published_date.toLocaleDateString("vi-VN") %></p> <!-- Dynamic date -->
    </div>

    <!-- Image Placeholder -->
    <div class="mb-4 text-center">
        <% if (article.thumbnail) { %>
            <img src="/img/<%= article.thumbnail %>" alt="Article Image" class="img-fluid rounded"> <!-- Dynamic image URL -->
        <% } else { %>
            <img src="https://via.placeholder.com/800x400" alt="Placeholder Image" class="img-fluid rounded"> <!-- Fallback image -->
        <% } %>
    </div>

    <!-- Abstract -->
    <div class="mb-4">
        <p class="fst-italic"><%= article.abstract %></p> <!-- Dynamic abstract -->
    </div>
    <div class="mb-4">
        <p class="fst-italic"><%= article.content %></p> <!-- Dynamic abstract -->
    </div>


    <!-- Tags -->
     <!-- Need to meet with be to fix - Sang-->
    <div class="mb-4">
        <% if (article.tags) { %>
            <% article.tags.split(",").forEach(tag => { %> <!-- Assuming tags are stored as a comma-separated string -->
                <span class="badge bg-secondary me-1"><%= tag.trim() %></span>
            <% }) %>
        <% } %>
    </div>


<!-- Button trigger modal -->
<button type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#exampleModal">
Từ chối
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Lý do từ chối</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
            <label for="txtContent">Nội dung từ chối</label>
            <textarea id="txtContent" 
                      class="form-control" 
                      name="content" 
                      rows="5" 
                      placeholder="Write the content"></textarea>
          </div>      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
        <button type="button" class="btn btn-primary">Gửi</button>
      </div>
    </div>
  </div>
</div>
<button type="button" class="btn btn-success" data-toggle="modal" data-target="#exampleModal">
    Phê duyệt
    </button>
