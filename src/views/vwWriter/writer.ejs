<!-- Hiện danh sách các bài báo đã viết -->
<!-- Thông tin của bài báo gồm: -->
<!-- 1. Title -->
<!-- 2. Chuyên mục -->
<!-- 3. Lần chỉnh sửa cuối -->
<!-- 4. Trạng thái -->
<!-- 5. Người duyệt -->
<!-- Link đến trang edit bài viết -->
<link rel="stylesheet" href="/css/vwWriter/writer.css" />
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous"
/>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
	crossorigin="anonymous"
></script>
<!-- Tabs Navigation -->

<ul class="nav nav-underline">
	<li class="nav-item">
		<a class="nav-link <%= activeTab == 'draft' ? 'active' : ''%>" href="/writer?page=1&tab=draft">Nháp</a>
	</li>
	<li class="nav-item">
		<a class="nav-link <%= activeTab == 'waiting' ? 'active' : ''%>" href="/writer?page=1&tab=waiting">Chờ duyệt</a>
	</li>
	<li class="nav-item">
		<a class="nav-link <%= activeTab == 'need-changes' ? 'active' : ''%>" href="/writer?page=1&tab=need-changes">Cần chỉnh sửa</a>
	</li>
	<li class="nav-item">
		<a class="nav-link <%= activeTab == 'archived' ? 'active' : ''%>" href="/writer?page=1&tab=archived">Đã lên lịch</a>
	</li>
	<li class="nav-item">
		<a class="nav-link <%= activeTab == 'published' ? 'active' : ''%>" href="/writer?page=1&tab=published">Đã xuất bản</a>
	</li>
</ul>

<!-- Tab Content: Nháp -->
<div class="table-container fade show">
	<table class="table table-striped table-bordered align-middle">
		<thead>
			<tr>
				<th style="width: 15%" class="text-center">Ảnh đại diện</th>
				<th style="width: 30%" class="text-center">Tiêu đề</th>
				<th style="width: 15%" class="text-center">Chuyên mục</th>
				<th style="width: 15%" class="text-center">Nhãn dán</th>

				<% if (activeTab === 'waiting' || activeTab === 'request-changes') { %>
				<th style="width: 20%" class="text-center">Tác giả</th>
				<% } %> <% if (activeTab === 'request-changes') { %>
				<th style="width: 20%" class="text-center">Biên tập viên</th>
				<% } %> <% if (activeTab === 'archived' || activeTab === 'published') { %>
				<th style="width: 10%" class="text-center">Ngày đăng</th>
				<th style="width: 20%" class="text-center">Biên tập viên</th>
				<% } %>
			</tr>
		</thead>
		<tbody>
			<% if (articles.length > 0) { %> <% articles.forEach(article => { %>
			<tr>
				<td class="text-center align-middle">
					<% if (article.thumbnail) { %>
					<img src="/img/<%= article.thumbnail %>" alt="Thumbnail" class="img-thumbnail d-block mx-auto" style="width: 100px; height: auto" />
					<% } else { %>
					<img src="/img/default-thumbnail.png" alt="Default Thumbnail" class="img-thumbnail d-block mx-auto" style="width: 100px; height: auto" />
					<% } %>
				</td>
				<td>
					<a href="/editor/edit?id=<%= article.article_id %>" class="text-decoration-none text-primary" title="<%= article.title %>"> <%= article.title %> </a>
				</td>
				<td class="text-center align-middle"><%= article.category_name || 'N/A' %></td>
				<td class="text-center align-middle"><%= article.tags || 'Không có nhãn dán' %></td>

				<% if (activeTab === 'waiting' || activeTab === 'request-changes') { %>
				<td class="text-center align-middle"><%= article.writer_fullname %></td>
				<% } %> <% if (activeTab === 'request-changes') { %>
				<td class="text-center align-middle"><%= article.editor_fullname %></td>
				<% } %> <% if (activeTab === 'archived' || activeTab === 'published') { %>
				<td class="text-center align-middle"><%= article.publish_date %></td>
				<td class="text-center align-middle"><%= article.editor_fullname %></td>
				<% } %>
			</tr>
			<% }) %> <% } else { %>
			<tr>
				<td colspan="6" class="text-center align-middle">Không có bài viết nháp.</td>
			</tr>
			<% } %>
		</tbody>
	</table>
	<nav aria-label="Page navigation example">
		<ul class="pagination">
			<li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
				<a class="page-link" href="/writer?page=<%= currentPage - 1 %>&tab=<%= activeTab %>" aria-label="Previous">
					<span aria-hidden="true">&laquo;</span>
				</a>
			</li>
			<% for (let i = 1; i <= totalPages; i++) { %>
			<li class="page-item <%= currentPage === i ? 'active' : '' %>">
				<a class="page-link" href="/writer?page=<%= i %>&tab=<%= activeTab %>"><%= i %></a>
			</li>
			<% } %>
			<li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
				<a class="page-link" href="/writer?page=<%= currentPage + 1 %>&tab=<%= activeTab %>" aria-label="Next">
					<span aria-hidden="true">&raquo;</span>
				</a>
			</li>
		</ul>
	</nav>
</div>
