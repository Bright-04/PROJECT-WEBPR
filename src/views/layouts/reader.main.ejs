<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>DHLQS News - Cổng tin tức thế giới</title>

		<!-- Google Fonts - Newspaper Optimized -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&family=Merriweather:wght@300;400;700;900&display=swap" rel="stylesheet" />

		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

		<!-- Bootstrap Icons -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

		<!-- Swiper CSS -->
		<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

		<!-- Design System -->
		<link rel="stylesheet" href="/css/design-system.css" />

		<!-- Custom Styles -->
		<link rel="stylesheet" href="/css/layouts/reader.main.css" />

		<!-- Favicon -->
		<link rel="icon" type="image/png" href="/img/logo/logo.png" />

		<!-- Meta Tags -->
		<meta name="description" content="DHLQS News - Cổng tin tức thế giới với những bài viết chất lượng, cập nhật tin tức mới nhất" />
		<meta name="keywords" content="tin tức, báo điện tử, thời sự, kinh tế, công nghệ, thể thao" />
		<meta name="author" content="DHLQS News Team" />

		<!-- Open Graph -->
		<meta property="og:title" content="DHLQS News - Cổng tin tức thế giới" />
		<meta property="og:description" content="Cập nhật tin tức mới nhất, bài viết chất lượng" />
		<meta property="og:image" content="/img/logo/logo.png" />
		<meta property="og:url" content="" />
	</head>

	<body>
		<!-- Skip to main content for accessibility -->
		<a href="#main-content" class="skip-link">Skip to main content</a>
		
		<div class="main-content-wrapper">
			<!-- Header -->
			<header class="header">
				<!-- Top Bar -->
				<div class="top-bar bg-gray-900 text-white py-2">
					<div class="container">
						<div class="row align-items-center">
							<div class="col-md-6">
								<div class="d-flex align-items-center">
									<i class="bi bi-clock me-2"></i>
									<small>Cập nhật lần cuối: <%= new Date().toLocaleDateString('vi-VN') %></small>
								</div>
							</div>
							<div class="col-md-6 text-end">
								<div class="d-flex align-items-center justify-content-end">
									<a href="#" class="text-white me-3"><i class="bi bi-facebook"></i></a>
									<a href="#" class="text-white me-3"><i class="bi bi-twitter"></i></a>
									<a href="#" class="text-white me-3"><i class="bi bi-instagram"></i></a>
									<a href="#" class="text-white"><i class="bi bi-youtube"></i></a>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Main Navigation -->
				<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
					<div class="container">
						<!-- Logo -->
						<a class="navbar-brand d-flex align-items-center" href="/homepage">
							<img src="/img/logo/logo.png" alt="DHLQS News" height="50" class="me-3" />
							<div>
								<h4 class="mb-0 text-primary fw-bold">DHLQS News</h4>
								<small class="text-gray-600">Cổng tin tức thế giới</small>
							</div>
						</a>

						<!-- Mobile Toggle -->
						<button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
							<span class="navbar-toggler-icon"></span>
						</button>

						<!-- Navigation Items -->
						<div class="collapse navbar-collapse" id="navbarNav">
							<!-- Search Bar -->
							<form class="d-flex mx-auto" action="/homepage/search" method="GET" style="max-width: 400px">
								<div class="input-group">
									<input class="form-control border-end-0" type="search" name="q" placeholder="Tìm kiếm tin tức..." aria-label="Search" />
									<button class="btn btn-outline-primary border-start-0" type="submit">
										<i class="bi bi-search"></i>
									</button>
								</div>
							</form>

							<!-- User Menu -->
							<ul class="navbar-nav ms-auto">
								<% if (user) { %>
								<li class="nav-item dropdown">
									<a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
										<div class="avatar me-2">
											<i class="bi bi-person-circle fs-4 text-primary"></i>
										</div>
										<span class="fw-medium"><%= user.full_name %></span>
									</a>
									<ul class="dropdown-menu dropdown-menu-end shadow-lg border-0">
										<li>
											<a class="dropdown-item" href="/vwProfile/premium"> <i class="bi bi-star-fill text-warning me-2"></i>Premium Account </a>
										</li>
										<li>
											<a class="dropdown-item" href="/profile"> <i class="bi bi-person me-2"></i>Hồ sơ cá nhân </a>
										</li>
										<li><hr class="dropdown-divider" /></li>
										<li>
											<a class="dropdown-item text-danger" href="/logout"> <i class="bi bi-box-arrow-right me-2"></i>Đăng xuất </a>
										</li>
									</ul>
								</li>
								<% } else { %>
								<li class="nav-item">
									<a class="btn btn-primary" href="/login"> <i class="bi bi-box-arrow-in-right me-2"></i>Đăng nhập </a>
								</li>
								<% } %>
							</ul>
						</div>
					</div>
				</nav>

				<!-- Category Navigation -->
				<div class="category-nav bg-white border-bottom">
					<div class="container">
						<div class="category-scroll">
							<ul class="nav nav-pills">
								<li class="nav-item">
									<a class="nav-link text-dark d-flex align-items-center" href="/homepage"> <i class="bi bi-house-door me-2"></i>Trang chủ </a>
								</li>
								<% const parentCategories = categories.filter(cat => cat.belong_to === null); %> <% parentCategories.forEach(parent => { %>
								<li class="nav-item">
									<a class="nav-link text-dark" href="/homepage/cate?id=<%= parent.category_id %>" id="category-<%= parent.category_id %>"> <%= parent.category_name %> </a>
								</li>
								<% }); %>
							</ul>
						</div>
					</div>
				</div>
			</header>

			<!-- Main Content -->
			<main id="main-content" class="main-content"><%- body %></main>

			<!-- Footer -->
			<%- include('../partials/footer') %>
		</div>

		<!-- Scripts -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

		<!-- Custom Scripts -->
		<script>
			// Smooth scrolling for category navigation
			document.addEventListener("DOMContentLoaded", function () {
				// Add active class to current category
				const currentPath = window.location.pathname;
				const categoryLinks = document.querySelectorAll(".category-nav .nav-link");

				categoryLinks.forEach((link) => {
					if (link.getAttribute("href") === currentPath) {
						link.classList.add("active");
					}
				});

				// Smooth scroll for category navigation
				const categoryNav = document.querySelector(".category-scroll");
				if (categoryNav) {
					categoryNav.addEventListener("wheel", function (e) {
						if (e.deltaY !== 0) {
							e.preventDefault();
							this.scrollLeft += e.deltaY;
						}
					});
				}

				// Add animation classes to elements
				const observerOptions = {
					threshold: 0.1,
					rootMargin: "0px 0px -50px 0px",
				};

				const observer = new IntersectionObserver(function (entries) {
					entries.forEach((entry) => {
						if (entry.isIntersecting) {
							entry.target.classList.add("animate-fade-in");
						}
					});
				}, observerOptions);

				// Observe all cards and sections
				document.querySelectorAll(".card, .section").forEach((el) => {
					observer.observe(el);
				});
			});

			// Header scroll effect
			let lastScroll = 0;
			const header = document.querySelector(".header");

			window.addEventListener("scroll", () => {
				const currentScroll = window.pageYOffset;

				if (currentScroll > 100) {
					header.classList.add("scrolled");
				} else {
					header.classList.remove("scrolled");
				}

				lastScroll = currentScroll;
			});
		</script>
	</body>
</html>
