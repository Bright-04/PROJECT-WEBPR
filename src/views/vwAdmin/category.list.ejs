<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<div class="container card w-75">
	<h4 class="card-header d-flex justify-content-between">
		Quản lý chuyên mục
		<a class="btn btn-sm btn-outline-primary" href="/admin/categories/add" role="button">
			<i class="fa fa-plus" aria-hidden="true"></i>
			Thêm chuyên mục
		</a>
	</h4>
	<div class="accordion" id="categoriesAccordion">
		<% categories.forEach(category => { %>
		<div class="accordion-item">
			<h2 class="accordion-header" id="heading-<%= category.category_id %>">
				<button
					class="accordion-button fw-bold collapsed"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#collapse-<%= category.category_id %>"
					aria-expanded="true"
					aria-controls="collapse-<%= category.category_id %>"
				>
					<%= category.category_name %>
				</button>
			</h2>
			<div id="collapse-<%= category.category_id %>" class="accordion-collapse collapse" aria-labelledby="heading-<%= category.category_id %>" data-bs-parent="#categoriesAccordion">
				<div class="accordion-body d-flex justify-content-between align-items-center">
					<div>
						<p><strong>Mô tả:</strong> <%= category.description %></p>
					</div>
					<a class="btn btn-sm btn-primary" href="/admin/categories/edit?id=<%= category.category_id%>" role="button"> Edit </a>
				</div>
				<div class="accordion mb-3 px-3" id="subCategories-<%= category.category_id %>">
					<% category.subcategories.forEach(subcat => { %>
					<div class="accordion-item">
						<h2 class="accordion-header" id="subHeading-<%= subcat.category_id %>">
							<button
								class="collapsed accordion-button"
								type="button"
								data-bs-toggle="collapse"
								data-bs-target="#subCollapse-<%= subcat.category_id %>"
								aria-expanded="false"
								aria-controls="subCollapse-<%= subcat.category_id %>"
							>
								<%= subcat.category_name %>
							</button>
						</h2>
						<div
							id="subCollapse-<%= subcat.category_id %>"
							class="accordion-collapse collapse"
							aria-labelledby="subHeading-<%= subcat.category_id %>"
							data-bs-parent="#subCategories-<%= category.category_id %>"
						>
							<div class="accordion-body d-flex justify-content-between align-items-center">
								<div>
									<p><strong>Mô tả:</strong> <%= subcat.description %></p>
								</div>
								<a class="btn btn-sm btn-primary" href="/admin/categories/edit?id=<%= subcat.category_id%>" role="button"> Edit </a>
							</div>
						</div>
					</div>
					<% }); %>
				</div>
			</div>
		</div>
		<% }); %>
	</div>
</div>
